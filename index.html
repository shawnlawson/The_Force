<!DOCTYPE HTML>
<html>

<head>
    <title>- - --== The Force ==-- - -</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="icon" href="img/favicon.png">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="lib/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="lib/fpsmeter.js"></script>
    <script type="text/javascript" src="lib/ace/ace.js"></script>
    <script type="text/javascript" src="lib/ace/ext-language_tools.js"></script>
    <script type="text/javascript" src="lib/ace/ext-static_highlight.js"></script>
    <script type="text/javascript" src="lib/FileSaver.js"></script>
    <script type="text/javascript" src="lib/canvas-toBlob.js"></script>
    <script type="text/javascript" src="lib/osc.js"></script>
    <script src="https://connect.soundcloud.com/sdk.js"></script>
    <script type="text/javascript" src="js/openGL.js"></script>
    <script type="text/javascript" src="js/oscManager.js"></script>
    <script type="text/javascript" src="js/myMIDI.js"></script>
    <script type="text/javascript" src="js/pageGlobals.js"></script>
</head>

<body>
    <!-- editor =================================================================================== -->
    <div id="editor"></div>
    <!-- audio =================================================================================== -->
    <div id="audioPanel" title="Audio Input">
        <div id="audioTabs" class="myTabs">
            <ul>
                <li><a href="#tabs-1">None</a></li>
                <li><a href="#tabs-2">Mic/Line</a></li>
                <li><a href="#tabs-3">Server</a></li>
                <li><a href="#tabs-4">File</a></li>
                <li><a href="#tabs-5">SoundCloud</a></li>
            </ul>
            <div id="tabs-1">
                <input type="submit" id="soundOffButton" value="all audio off" />
            </div>
            <div id="tabs-2">
                <input type="submit" id="micToggleButton" value="start microphone/line in" />
                <input type="checkbox" id="micTogglePlaythrough">
                <label for="micTogglePlaythrough">playthrough</label>
            </div>
            <div id="tabs-3">
                <input type="submit" id="myAudioServer" value="load file" />
                <input type="checkbox" id="myAudioServerLoop" value="loop" />
                <label for="myAudioServerLoop">loop</label>
            </div>
            <div id="tabs-4">
                <input type="file" id="myAudioFile" accept="audio/*" />
                <input type="checkbox" id="myAudioFileLoop" value="loop" />
                <label for="myAudioFileLoop">loop</label>
            </div>
            <div id="tabs-5">
                <div id="trackInfoPanel">
                    <img id="infoImage" src="">
                    <div id="infoArtist"></div>
                    <div id="infoTrack"></div>
                </div>
                <div id="playerControls">
                    <form id="form">
                        <input id="input" placeholder="Paste Soundcloud URL here (https://soundcloud.com/artist/track)">
                        <button type="submit" id="submit">load</button>
                        <br>
                    </form>
                    <audio id="player" crossorigin="anonymous" controls="" autoplay="" preload autobuffer></audio>
                </div>
                <div id="messageBox">
                </div>
            </div>
        </div>
    </div>
    <!-- textures =================================================================================== -->
    <div id="texturePanel" title="Textures" class="texTable">
        <div class="tRow">
            <div class="texCell">
                <p>Slots</p>
            </div>
            <div class="texCell">
                <p>Options</p>
            </div>
        </div>
        <div class="tRow">
            <div class="texCell" title="texture channel 0">
                <img id="texture0" value="0" class="textureSlot" src="presets/previz/void.png" />
            </div>
            <!-- none, keyboard, webcam, audio -->
            <div class="texCell" title="no texture">
                <img id="tex_none" class="textureOption" src="presets/previz/void.png" />
            </div>
            <div class="texCell" title="keyboard">
                <img id="tex_keyboard" class="textureOption" src="presets/previz/keyboard.png" />
            </div>
            <div class="texCell" title="webcam">
                <img id="tex_webcam" class="textureOption" src="presets/previz/webcam.png" />
            </div>
            <div class="texCell" title="audio">
                <img id="tex_audio" class="textureOption" src="presets/previz/audio.png" />
            </div>
        </div>
        <div class="tRow">
            <div class="texCell" title="texture channel 1">
                <img id="texture1" class="textureSlot" src="presets/previz/void.png" />
            </div>
            <!-- bw noise, color noise, ,  -->
            <div class="texCell" title="noise bw">
                <img id="tex_noisebw" class="textureOption" src="presets/previz/noisebw.png" />
            </div>
            <div class="texCell" title="noise rgb">
                <img id="tex_noisecolor" class="textureOption" src="presets/previz/noisecolor.png" />
            </div>
            <div class="texCell" title="nyan animation">
                <img id="tex_nyan" class="textureOption" src="presets/previz/nyanIcon.png" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
        </div>
        <div class="tRow">
            <div class="texCell" title="texture channel 2">
                <img id="texture2" class="textureSlot" src="presets/previz/void.png" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
        </div>
        <div class="tRow">
            <div class="texCell" title="texture channel 3">
                <img id="texture3" class="textureSlot" src="presets/previz/void.png" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
            <div class="texCell">
                <img id="" class="textureOption" src="" />
            </div>
        </div>
    </div>
    <!-- edge blending =================================================================================== -->
    <div id="edgesPanel" title="Projection Mapping -- Probably shouldn't use this">
        <form>
            <div id="radio">
                <input type="radio" id="radio1" name="radio" value="1" checked="checked">
                <label for="radio1">Single Screen</label>
                <!-- <input type="radio" id="radio2" name="radio"><label for="radio2">Choice 2</label> -->
                <input type="radio" id="radio3" name="radio" value="3">
                <label for="radio3">Triple Screen</label>
            </div>
        </form>
        <button id="testImage">Test Image</button>
        <button id="loadMapping">Load Mapping</button>
        <button id="saveMapping">Save Mapping</button>
        <div id="edgesValues">
            <p>left</p>
            <input type="number" id="point1X" value="0.0" step="0.01" />
            <input type="number" id="point1Y" value="0.0" step="0.01" />
            <input type="number" id="scale1X" value="1.0" step="0.01" />
            <input type="number" id="scale1Y" value="1.0" step="0.01" />
            <input type="number" id="rotate1" value="0.0" step="0.01" />
            <br />
            <input type="number" id="blend1X" value="0.0" step="0.01" />
            <input type="number" id="blend1Y" value="0.001" step="0.01" />
            <input type="number" id="blend1Z" value="0.3" step="0.01" />
            <input type="number" id="blend1W" value="0.01" step="0.01" />
            <br />
            <p>center</p>
            <input type="number" id="point2X" value="0.0" step="0.01" />
            <input type="number" id="point2Y" value="0.0" step="0.01" />
            <input type="number" id="scale2X" value="1.0" step="0.01" />
            <input type="number" id="scale2Y" value="1.0" step="0.01" />
            <input type="number" id="rotate2" value="0.0" step="0.01" />
            <br />
            <input type="number" id="blend2X" value="0.3" step="0.01" />
            <input type="number" id="blend2Y" value="0.01" step="0.01" />
            <input type="number" id="blend2Z" value="0.6" step="0.01" />
            <input type="number" id="blend2W" value="0.01" step="0.01" />
            <br />
            <p>right</p>
            <input type="number" id="point3X" value="0.0" step="0.01" />
            <input type="number" id="point3Y" value="0.0" step="0.01" />
            <input type="number" id="scale3X" value="1.0" step="0.01" />
            <input type="number" id="scale3Y" value="1.0" step="0.01" />
            <input type="number" id="rotate3" value="0.0" step="0.01" />
            <br />
            <input type="number" id="blend3X" value="0.6" step="0.01" />
            <input type="number" id="blend3Y" value="0.01" step="0.01" />
            <input type="number" id="blend3Z" value="1.0" step="0.01" />
            <input type="number" id="blend3W" value=".0001" step="0.01" />
        </div>
    </div>
    <!-- osc =================================================================================== -->
    <div id="oscPanel" title="OSC Websocket">
        <div id="networkTabs" class="myTabs">
            <ul>
                <li><a href="#networkTabs-1">OSC</a></li>
                <li><a href="#networkTabs-2">MIDI</a></li>
            </ul>
            <div id="networkTabs-1">
                <p>OSC Websocket</p>
                <input type="text" id="socket_address" value="localhost" class="hide" />
                <input type="text" id="socket_port" value="8000" class="hide" />
                <input type="submit" id="socket_start" value="Start" />
                <input type="submit" id="socket_stop" value="Stop" />
                <span id="socket_status">offline</span>
                <p>Listening to - localhost:8000</p>
                <div id="myInputs">
                    <input type="submit" id="appendOSCInput" value="Add Input" />
                    <br />
                    <br />
                </div>
                <p>Sending to - localhost:7600</p>
                <p>Direct Message</p>
                <div>
                <form id="myConsole">
                <input type="text" id="consoleMessage" value="/out"/>
                <input type="text" id="consoleValue" value=".9"/>
                <input type="text" id="consoleLine" value="0"/>
                </form>
                </div>
                <p>Auto Messages</p>
                <div id="myOutputs">
                    <input type="submit" id="appendOSCOutput" value="Add Output" />
                    <br />
                    <br />
                </div>
            </div>
            <div id="networkTabs-2">
                <div id="selectMIDIInDIV" class="uiButton" title="MIDI Input">
                    <select id="selectMIDIIn">
                    <option>null</option>
                    </select>
                </div>
                <div id="selectMIDIOutDIV" class="uiButton" title="MIDI Output">
                    <select id="selectMIDIOut">
                    <option>null</option>
                    </select>
                </div>
                <br />
                <br />
                <p>MIDI Messages</p>
                <div id="MIDIMessages">
                </div>
            </div>
        </div>
    </div>
    <!-- Color Correction Panel =================================================================================== -->
    <div id="colorCorrectPanel" title="Color Correction">
        <p>
            <label for="gammaAmount">Gamma:</label>
            <input type="text" id="gammaAmount">
        </p>
        <div id="gammaSlider"></div>
        <p>
            <label for="redAmount">Red:</label>
            <input type="text" id="redAmount">
        </p>
        <div id="redSlider"></div>
        <p>
            <label for="greenAmount">Green:</label>
            <input type="text" id="greenAmount">
        </p>
        <div id="greenSlider"></div>
        <p>
            <label for="blueAmount">Blue:</label>
            <input type="text" id="blueAmount">
        </p>
        <div id="blueSlider"></div>
    </div>
    <!-- FUNCTION REFERENCE =================================================================================== -->
    <div id="helpPanel" title="Function Reference">
        <div id="helpTabs" class="myTabs">
            <ul>
                <li><a href="#tabsHelp-1">Colors</a></li>
                <li><a href="#tabsHelp-2">Uniforms</a></li>
                <li><a href="#tabsHelp-3">Addons</a></li>
                <li><a href="#tabsHelp-4">Math</a></li>
                <li><a href="#tabsHelp-5">GL</a></li>
                <li><a href="#tabsHelp-6">Snippets</a></li>
                <li><a href="#tabsHelp-7">Info</a></li>
            </ul>
            <div id="tabsHelp-1">
                <pre class="codeHighlight" ace-mode="ace/mode/glsl" ace-theme="ace/theme/monokai">
black   = vec3(0.0);
white   = vec3(1.0);
red     = vec3(0.86,0.22,0.27);
orange  = vec3(0.92,0.49,0.07);
yellow  = vec3(0.91,0.89,0.26);
green   = vec3(0.0,0.71,0.31);
blue    = vec3(0.05,0.35,0.65);
purple  = vec3(0.38,0.09,0.64);
pink    = vec3(.9,0.758,0.798);
lime    = vec3(0.361,0.969,0.282);
teal    = vec3(0.396,0.878,0.878);
                </pre>
            </div>
            <div id="tabsHelp-2">
                <pre class="codeHighlight" ace-mode="ace/mode/glsl" ace-theme="ace/theme/monokai">
resolution      = vec2(canvas width, canvas height); // value in pixels, 
                                                     // divided by pixel 
                                                     // size
time            = float;     // system time
<!-- channelTime[4]  -->
mouse           = vec4(mouse X, mouse Y, mouse click X, mouse click Y);
date            = vec4(); 
<!-- channelResolution[4]  -->
bands           = vec4(low, mid-low, mid-high, high) // FFT results
backbuffer      = texture2D; // previous render frame
                </pre>
            </div>
            <div id="tabsHelp-3">
                <pre class="codeHighlight" ace-mode="ace/mode/glsl" ace-theme="ace/theme/monokai">
PI              = 3.14159;
PI2             = 6.28318;
uv()            = vec2(x, y); // This pixel on screen when 
                              // coordinate system is: width
                              //  -width/height to width/height
                              //, height -1.0 to 1.0;
                              // center of canvas is origin
uvN()             = vec2(x, y); // this pixel on screen when 
                              // coordinate system is: width 
                              // 0.0 to 1.0, height 0.0 to 1.0; 
                              // bottom-left of canvas is origin
kale(vec2 p, float n) = float // Accepts UV-like space, and 
                              // divisions of PI. Returns a 
                              // kaleidoscope value
rand(float x)   = float       // pseudo-random 0.0 to 1.0
rand(vec2 x)    = float
noise( float )  = float       // noise 0.0 to 1.0    
noise( vec2 )   = float
noise( vec3 )   = float         
snoise( vec2 )  = float       // signed noise -1.0 to 0.0
snoise( vec3 )  = float
turbulence( vec2,
            float octaves ) = float    //returns random values 0.0 to 1.0
voronoi( vec2 ) = float       // returns 0.0 to 1.0 with a smooth 
                              // voronoi pattern
voronoi( vec3 ) = vec3        // returns a vec3 voronoi in three dimensions
fbm(float x, int it) = float  // Brownian motion function generator
                              // second parameter is number of iterations
fbm(vec2 x, int it) = float 
fbm(vec3 x, int it) = float 
rmf(vec2 x, int it) = float   // rigid multi-fractal generator
                              // second parameter is number of iterations
vrmf(vec2 x, int it) = float  // Voronoi version of rigid multi-fractal
                              // second parameter is number of iterations
vfbm(vec2 x, int it) = float  // Voronoi version of Brownian motion
                              // second parameter is number of iterations

hsv2rgb( vec3 ) = vec3        // convert hue, saturation, value to 
                              // red, green, blue
rotate(vec2 pivot, 
       vec2(x, y), 
       float amount)

box(vec2(x, y), 
    vec2(width, height), 
    float corner-roundness,
    float edge-feathering);

circle(float x,
       float y, 
       float radius, 
       float edge-feathering) 
                </pre>
            </div>
            <div id="tabsHelp-4">
                <pre class="codeHighlight" ace-mode="ace/mode/glsl" ace-theme="ace/theme/monokai">
// list of common gles math functions
radians(x)      // degrees to radians
degrees(x)      // radians to degrees
sin(x)          // sine of angle
cos(x)          // cosine of angle
tan(x)          // tangent of angle
asin(x)         // arc sine of angle
acos(x)         // arc cosine of angle
atan(y, x)      // arc tangent of (y, x)
atan(y_over_x)  // arc tangent of y/x
mamatrixCompMult(max, may) // multiply x by y component-wise
pow(x, y)       // x to y exponent; x^y
exp(x)          // ex
log(x)          // natural log
exp2(x)         // 2x
log2(x)         // log base 2
sqrt(x)         // square root; x^(1/2)
inversesqrt(x)  // inverse square root; 1/(x^(1/2))
abs(x)          // absolute value
sign(x)         // returns -1.0, 0.0, or 1.0
floor(x)        // nearest integer less than x
ceil(x)         // nearest integer greater than x
fract(x)        // x - floor(x)
mod(x, y)       // modulus
min(x, y)       // minimum value
max(x, y)       // maximum value
clamp(x,        // keep x between minVal and maxVal
      minVal, 
      maxVal)         
mix(x, y, a)    // linear blend of x and y using a. (lerp)
step(edge, x)   // 0.0 if x less than edge, else 1.0
smoothstep(edge0, // clip and smooth
           edge1,
           x)          
                 </pre>
            </div>
            <div id="tabsHelp-5">
                <pre class="codeHighlight" ace-mode="ace/mode/glsl" ace-theme="ace/theme/monokai">
gl_FragCoord = vec4(x, y, z, w) // fragment position within 
                                // frame buffer window coordinates

gl_FragColor = vec4(r, g, b, a) // fragment color

texture2D(tex, vec2) = vec4(r, g, b, a) // tex is a texture: channel0 ...
                                        // channel3 or backbuffer
                </pre>
            </div>
            <div id="tabsHelp-6">
                <pre class="codeHighlight" ace-mode="ace/mode/glsl" ace-theme="ace/theme/monokai">
forf    = for(float i = 0.0; i < float; i++){
          }
fori    = for(int i = 0; i < int; i++){
          }
iff     = if(false){
          }
vc     = vec2
vvc    = vec3
ft     = float
                </pre>
            </div>
            <div id="tabsHelp-7">
                <pre class="codeHighlight" ace-mode="ace/mode/glsl" ace-theme="ace/theme/monokai">
// Created by: Shawn Lawson, http://shawnlawson.com

// Github Respository: https://github.com/shawnlawson/The_Force

                </pre>
            </div>
        </div>
    </div>
    <!-- footer UI =================================================================================== -->
    <div id="footer">
        <div id="myFrameRate"></div>
        <canvas id="fourBands" width="100" height="32"></canvas>
        <div id="audioClock"></div>
        <div id="footerUI">
            <div id="selectQualityDIV" class="uiButton" title="Pixel Size">
                <select id="selectQuality">
                    <option value="0.5">.5</option>
                    <option value="1">1</option>
                    <option value="2" selected="selected">2</option>
                    <option value="4">4</option>
                    <option value="8">8</option>
                </select>
            </div>
            <div id="selectFontSizeDIV" class="uiButton" title="Text Size">
                <select id="selectFontSize">
                    <option value="10">10</option>
                    <option value="12" selected="selected">12</option>
                    <option value="14">14</option>
                    <option value="16">16</option>
                    <option value="18">18</option>
                    <option value="24">24</option>
                </select>
            </div>
            <input type="submit" id="audioButton" value="" class="uiButton" title="Audio Input" />
            <input type="checkbox" id="debug" value="" />
            <label for="debug" class="uiButton" title="Toggle Debugging"></label>
            <input type="submit" id="texturing" value="" class="uiButton" title="Texture Panel" />
            <input type="submit" id="edges" value="" class="uiButton" title="Projection Mapping Panel" />
            <input type="file" id="mySettings" class="hide" />
            <input type="submit" id="network" value="" class="uiButton" title="OSC Panel" />
            <input type="submit" id="colorCorrectButton" value="" class="uiButton" title="Color Correction Panel" />
            <input type="submit" id="openFile" value="" class="uiButton" title="Open Shader File" />
            <input type="file" id="myFile" class="hide" />
            <input type="submit" id="saveFile" value="" class="uiButton" title="Save Shader File" />
            <input type="submit" id="saveImage" value="" class="uiButton" title="Save PNG" />
            <input type="checkbox" id="play" value="" />
            <label for="play" class="uiButton" title="Toggle Rendering"></label>
            <input type="submit" id="funcButton" value="" class="uiButton" title="Function Reference" />
            <input type="checkbox" id="myFullScreen" value="" />
            <label for="myFullScreen" class="uiButton" title="Toggle Fullscreen"></label>
        </div>
    </div>
     <!-- video =================================================================================== -->
     <video id="video" style="display:none"></video>
    <script>
        video = document.getElementById( 'video' );
     
        window.addEventListener('DOMContentLoaded', function(){
                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;
        
            if (navigator.getUserMedia) {       
                navigator.getUserMedia({video: true, audio: false}, handleVideo, videoError);
            }
            else{
            alert('Your browser does not support getUserMedia. Try Chrome or Firefox instead')
            }
            function handleVideo(stream) {
            var url = window.URL || window.webkitURL;
            video.srcObject = stream;
            //  video.src = url ? url.createObjectURL(stream) : stream;
                video.play();
                //video.src = window.URL.createObjectURL(stream);
                videoLoaded = true;
                $('#infoBox').fadeOut(1000);
            }
        
            function videoError(e) {
            alert("There seems to be something wrong with your webcam :( Maybe try reloading the page");
                return;
            }

  });

    </script>
    <!-- canvas =================================================================================== -->
    <canvas id="demogl"></canvas>
</body>

</html>